<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Z-TEAM Loading Screen</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background-color: #000;
        color: #fff;
        font-family: 'Courier New', monospace;
        overflow: hidden;
        filter: grayscale(100%);
        height: 100vh;
        width: 100vw;
    }

    #container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        width: 80%;
        z-index: 10;
    }

    #logo {
        width: min(30vw, 400px);
        height: auto;
        margin-bottom: 25px;
        animation: flicker 0.5s infinite alternate, shake 0.3s infinite;
        cursor: pointer;
    }

    #servername {
        font-size: 2.2em;
        margin-bottom: 10px;
        color: #fff;
        text-shadow: 0 0 6px rgba(255,255,255,0.6);
        animation: glitch 1s infinite;
    }

    #status {
        font-size: 1.3em;
        margin-bottom: 15px;
        color: #fff;
        text-shadow: 0 0 6px rgba(255,255,255,0.6);
        animation: pulse 2.5s infinite;
    }


    #details {
        font-size: 1em;
        color: #888;
        margin-top: 10px;
    }

    .thought {
        position: absolute;
        color: rgba(255, 255, 255, 0.75);
        font-size: 1em;
        pointer-events: none;
        animation: fade-move 6s ease-in-out forwards;
        z-index: 1;
        text-shadow: 0 0 6px rgba(255,255,255,0.4);
        white-space: nowrap;
    }

    /* ---- АНИМАЦИИ ---- */
    @keyframes flicker {
        0% { opacity: 1; }
        100% { opacity: 0.8; }
    }

    @keyframes glitch {
        0% { transform: translate(0); }
        20% { transform: translate(-2px, 1px); }
        40% { transform: translate(2px, -1px); }
        60% { transform: translate(-1px, 1px); }
        80% { transform: translate(1px, -1px); }
        100% { transform: translate(0); }
    }


    @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.9; }
        50% { transform: scale(1.05); opacity: 1; }
    }

    @keyframes fade-move {
        0% { opacity: 0; transform: translateY(0); }
        20% { opacity: 0.8; }
        80% { opacity: 0.8; transform: translateY(-30px); }
        100% { opacity: 0; transform: translateY(-50px); }
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-2px); }
        75% { transform: translateX(2px); }
    }

    /* Снежинки */
    .snowflake {
        position: absolute;
        top: -10px;
        color: #fff;
        font-size: 20px;
        pointer-events: none;
        animation: fall linear infinite;
        opacity: 0.8;
        z-index: 5;
    }

    @keyframes fall {
        0% { transform: translateY(0) rotate(0deg); }
        100% { transform: translateY(100vh) rotate(360deg); }
    }

    /* Анимация растяжения логотипа */
    .logo-stretch {
        animation: stretch 0.6s ease-in-out;
    }

    @keyframes stretch {
        0% { transform: scale(1); }
        50% { transform: scale(2, 0.5); }
        100% { transform: scale(1); }
    }

    @keyframes rainbow {
        0% { color: #ff0000; text-shadow: 0 0 6px rgba(255,0,0,0.6); }
        16% { color: #ffa500; text-shadow: 0 0 6px rgba(255,165,0,0.6); }
        33% { color: #ffff00; text-shadow: 0 0 6px rgba(255,255,0,0.6); }
        50% { color: #00ff00; text-shadow: 0 0 6px rgba(0,255,0,0.6); }
        66% { color: #0000ff; text-shadow: 0 0 6px rgba(0,0,255,0.6); }
        83% { color: #4b0082; text-shadow: 0 0 6px rgba(75,0,130,0.6); }
        100% { color: #ff00ff; text-shadow: 0 0 6px rgba(255,0,255,0.6); }
    }
</style>
<script bis_use="true" type="text/javascript" charset="utf-8" data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;]" src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/executors/traffic.js"></script></head>
<body>
    <div id="container">
        <img id="logo" src="./img/pulchra.png" alt="ZTOWN Logo" usemap="#image-map" onclick="playSound(); animateLogo();">
        <map name="image-map">
            <area alt="" title="" href="javascript:void(0);" onclick="playSound(); animateLogo();" coords="877,529,1001,436" shape="rect">
        </map>
        <div id="servername" bis_skin_checked="1">ZG & TEAM • Community</div>
        <div id="status">Load Location: Freedom..</div>
        <div id="details">Ожидания Загрузки на сервер! ...</div>
    </div>

    <script>
        function playSound() {
            console.log('Playing sound');
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.type = 'square';

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function animateLogo() {
            console.log('Animating logo');
            const logo = document.getElementById('logo');
            logo.classList.remove('logo-stretch');
            setTimeout(() => logo.classList.add('logo-stretch'), 10);
            setTimeout(() => logo.classList.remove('logo-stretch'), 600);
        }

        /* ============ МЫСЛИ ============ */
        const thoughts = [
            "Z-TYLE Калл",
            "VL Cиськастый",
            "Еба Игнат Жирный",
            "У Выгу Толстый Папа",
            "Я не могу дышать",
            "Статья 131 - иди нахуй сын бляди",
            "В чем сила брат?",
            "Поворешка Фурри Дрочер",
            "Чулки Салата",
            "троляфикация 67% ШТООО 676767",
            "Sadsalat ебаный пидор",
            "У НЕГО НОЖ!",
            "Рубич наверна женщино чтооо??",
            "Макс Пуська",
            "Сисюндель",
            "Ригби Топ",
            "ЭТО ЧТО ЗА ХУЙНЯ?",
            "молодЧИНА",
            "Ивалиды рулят!",
            "Яйцэ",
            "Где папа?",
            "Мияби топ!",
            "Купить дилдо.",
            "Пульхра Сисястая",
            "Убить ребёнка инвалида кирпичём..",
            "Босинчик - бйбаыюююп.",
            "Игнат Самый Жирный",
            "Я ахуенный",
            "Можно мне гарем?",
            "Криппи - тролль",
            "Джампскаут Чарли Кирка",
            "Смерть ребёнка инвалида бемс",
            "Доо братан доо конечно конечно бротон",
            "NIGGERS",
            "ZOV",
            "Иногда надо задуматься..",
            "ДА ЕБАТЬ СКОЛЬКО МОЖНО?"
        ];

        function spawnThought() {
            const text = thoughts[Math.floor(Math.random() * thoughts.length)];
            const div = document.createElement('div');
            div.classList.add('thought');
            div.textContent = text;
            div.style.left = `${Math.random() * window.innerWidth * 0.9}px`;
            div.style.top = `${Math.random() * window.innerHeight * 0.9}px`;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 6000);
        }

        // Очень частые мысли (каждые 0.3–0.8 сек)
        setInterval(spawnThought, Math.random() * 500 + 300);

        /* ============ СНЕЖИНКИ ============ */
        function spawnSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.textContent = '❄';
            snowflake.style.left = Math.random() * window.innerWidth + 'px';
            snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's'; // 2-5 сек
            snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px'; // 10-20px
            document.body.appendChild(snowflake);
            setTimeout(() => snowflake.remove(), 5000);
        }

        // Снежинки каждые 0.5-1 сек
        setInterval(spawnSnowflake, Math.random() * 500 + 500);

        /* ============ GARRY'S MOD ИНТЕГРАЦИЯ ============ */
        let totalFiles = 0, neededFiles = 0, leftFiles = 0;
        let totalWS = 0, leftWS = 0;
        let finished = false;
        let val = 0;

        const status = document.getElementById("status");
        const details = document.getElementById("details");
        const servername = document.getElementById("servername");

        function clamp(num){ return Math.min(Math.max(num, 0), 1); }

        // --- Эти функции вызываются GMod во время загрузки ---
        function SetStatusChanged(str) {
            status.innerText = str;
            if (str === "Sending client info...") {
                finished = true;
                status.innerText = "Joining the nightmare...";
            }
        }

        function SetFilesTotal(num) {
            totalFiles = num;
            leftFiles = num;
        }

        function DownloadingFile(name) {
            leftFiles--;
            details.innerText = "Downloading: " + name;
        }

        function SetFilesNeeded(num) {
            totalWS = num;
            leftWS = num;
        }

        // GMod replaces %mapname% and %servername% in the loading screen URL
        // they can be extracted for display:
        const params = new URLSearchParams(window.location.search);
        const initialMap = status.innerText.replace("Loading map: ", "");
        const initialName = servername.innerText;
        const map = params.get("mapname") || initialMap || "%mapname%";
        const name = params.get("servername") || initialName || "XCITY";
        servername.innerText = name;
        // status.innerText = "Loading map: " + map; // Removed to keep "Загрузка.."
    </script>



